(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=r[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"img/gnome.png";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}var o=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.boardSize=t,this.cells=[],this.currentGnomeCell=null,this.score=0,this.interval=null,this.boardElement=document.getElementById("game-board"),this.scoreElement=document.getElementById("score"),this.resetButton=document.getElementById("reset-btn"),this.init()},(n=[{key:"init",value:function(){this.createBoard(),this.createGnome(),this.startMoving(),this.attachEvents()}},{key:"createBoard",value:function(){this.boardElement.innerHTML="",this.cells=[];for(var e=0;e<this.boardSize*this.boardSize;e++){var t=document.createElement("div");t.className="cell",t.dataset.index=e,this.boardElement.appendChild(t),this.cells.push(t)}}},{key:"createGnome",value:function(){this.currentGnomeCell&&(this.currentGnomeCell.innerHTML="",this.currentGnomeCell.classList.remove("has-gnome"));var e=document.createElement("img");e.src=t,e.alt="Gnome",e.className="gnome-image";var n=Math.floor(Math.random()*this.cells.length),r=this.cells[n];r.append(e),r.classList.add("has-gnome"),this.currentGnomeCell=r}},{key:"moveGnome",value:function(){if(this.currentGnomeCell){var e,t=parseInt(this.currentGnomeCell.dataset.index);do{e=Math.floor(Math.random()*this.cells.length)}while(e===t);var n=this.cells[e],r=this.currentGnomeCell.querySelector("img");r&&(n.append(r),this.currentGnomeCell.classList.remove("has-gnome"),n.classList.add("has-gnome"),this.currentGnomeCell=n)}}},{key:"startMoving",value:function(){var e=this;this.interval&&clearInterval(this.interval),this.interval=setInterval(function(){e.moveGnome()},1e3)}},{key:"handleCellClick",value:function(e){var t=e.target.closest(".cell");t&&t.classList.contains("has-gnome")&&(this.score+=1,this.scoreElement.textContent=this.score,t.style.backgroundColor="#FFD700",setTimeout(function(){t.style.backgroundColor=""},200))}},{key:"resetGame",value:function(){this.score=0,this.scoreElement.textContent=this.score,this.createGnome()}},{key:"attachEvents",value:function(){var e=this;this.boardElement.addEventListener("click",function(t){return e.handleCellClick(t)}),this.resetButton.addEventListener("click",function(){return e.resetGame()})}},{key:"destroy",value:function(){this.interval&&clearInterval(this.interval),this.boardElement.removeEventListener("click",this.handleCellClick),this.resetButton.removeEventListener("click",this.resetGame)}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();document.addEventListener("DOMContentLoaded",function(){new o})})();